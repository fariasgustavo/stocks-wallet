datasource db {
    url = env("DATABASE_URL")
    provider = "postgresql"
}

model User {
    id Int @id @default(autoincrement())
    email String @unique
    password String
    stocks UserStocks[]
    transactions UserStocksTransactions[]
}

model Stocks {
    id Int @id @default(autoincrement())
    ticker String
    users UserStocks[]
    transactions UserStocksTransactions[]
}

model UserStocks {
    user User @relation(fields: [userId], references: [id])
    userId Int
    stock Stocks @relation(fields: [stockId], references: [id])
    stockId Int
    quantity Int
    averagePrice Float

    @@id([userId, stockId])
}

model UserStocksTransactions {
    id Int @id @default(autoincrement())
    user User @relation(fields: [userId], references: [id])
    userId Int
    stock Stocks @relation(fields: [stockId], references: [id])
    stockId Int
    quantity Int
    price Float
}
